version: 0.94.12.{build}

branches:
  only:
    - saskit-update

init:
  - git config --global core.autocrlf input

clone_depth: 1

environment:
  matrix:
    - COMPILER: msys2
      PLATFORM: x64
      MSYS2_ARCH: x86_64
      MSYS2_DIR: msys64
      MSYSTEM: MINGW64
      BIT: 64

install:
  # running under CI
  #  - 'echo  => Starting install at: & time /t'
  #- 'C:\%MSYS2_DIR%\usr\bin\sh.exe %APPVEYOR_BUILD_FOLDER%\src\appveyor\install.sh'
#  - set CI_TESTING=1
  - '%APPVEYOR_BUILD_FOLDER%\src\appveyor\install.bat'
#  - 'echo  => Finished install at: & time /t'

build_script:
  - 'sh %APPVEYOR_BUILD_FOLDER%\src\appveyor\build.sh'
  - 'echo  => Finished build at: & time /t'

test:
  assemblies:
    only:
      # saskit base package created by CMake
      - sasfit\saskit\saskit_*.exe
      # assembled SASfit library combined with saskit base package
      - sasfit\sasfit.exe
      # final SASfit package for users
      - sasfit\src\sasfit_*_*.tar.bz2

#test_script:
# - '%APPVEYOR_BUILD_FOLDER%\dev\ci\appveyor\test.bat'

notifications:
  - provider: Email
    to:
      - sasfit-ci@ingobressler.net
    on_build_success: false

# vim: set ts=2 sw=2 sts=2 tw=0:
